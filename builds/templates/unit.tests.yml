steps: 
  - task: CmdLine@2
    displayName: 'Install FE test packages'
    inputs:
      script: |
        npm install eslint typescript @angular/cli lodash -g
        npm install --only=dev
      workingDirectory: 'EmbyStat.Web/ClientApp'
    
  - task: DotNetCoreCLI@2
    displayName: 'Backend unit testing'
    inputs:
      command: test
      arguments: '--collect "Code Coverage"'
      testRunTitle: 'Beta unit tests'

  - script: 'eslint -f json -o report.json ./**/*.ts'
    workingDirectory: EmbyStat.Web/ClientApp
    displayName: 'Run eslint'

  - script: 'ng test --code-coverage  --watch=false'
    workingDirectory: EmbyStat.Web/ClientApp
    displayName: 'Run FE tests'

  - task: CopyFiles@2
    displayName: 'Copy Test result files'
    inputs:
      SourceFolder: '$(Agent.TempDirectory)'
      Contents: |
        **\*.trx
        **\*.coverage
        **\issues.json
      TargetFolder: '$(Common.TestResultsDirectory)'